---
layout: post
title: Open Information Extraction
date: 2017-05-08 00:00:00
tags: [information extraction, ReVerb, relationships, semantic triples]
categories: [blog]
comments: true
disqus_identifier: 20170508
preview_pic: /assets/images/2017-05-08-ReVerb.png
---

In this post I will present one of the first proposed Open Information Extraction systems,
which is very simple and effective, relying only on part-of-speech tags. I also implement it
and apply it to Portuguese news articles.

But first a small introduction, Information Extraction, in an NLP context, deals with the
problem of extracting structured information from text. For a computer text ist just a
sequence of bytes, with no semantic meaning whatsoever.

A possible approach to extract structured information from text is to extract semantic
relationships or semantic triples, for instance, named-entities (e.g., persons, locations,
organisations), and the semantic relationships between them.

Semantic relationships are typically represented by triples in the form <_e1_, _rel_, _e2_>,
where _e1_ and _e2_ are noun-phrases/entities of a relationship, and _rel_ is the type of relationship
relating the two noun phrases.

For instance, given the following sentence:

<p style="text-align: center;">
<b>"The linguist Noam Chomsky was born in East Oak Lane neighbourhood of Philadelphia."</b>
</p>

we first identify the named-entities, in this case, three different named-entities are
 recognized.

<figure>
  <img class="fullw" src="/assets/images/2017-05-08-Named_Entities.png">
</figure>

Then, two different relationships, can be extracted between the recognized named-entities:

<p style="text-align: center;">
 <<b>Noam Chomsky</b>, <i>place-of-birth</i>, <b>East Oak Lane</b>>
 <br>
 <<b>East Oak Lane</b>, <i>part-of</i>, <b>Philadelphia</b>>
</p>



Typically (or until 2007) most systems aimed at extracting relationships with known
_a priori_ relationship types (i.e., place-of-birth, part-of, etc.), and each target
relationship is learned from training data or defined by hand-made rules.

Another approach is Open Information Extraction (OIE)
([Etzioni et al. (2008)](http://aiweb.cs.washington.edu/research/projects/aiweb/media/papers/tmpcLeDnr.pdf),
[Banko, et al. (2007)](https://homes.cs.washington.edu/~soderlan/OpenIE-ijcai07.pdf)),
which is suited when the target relations are unknown and the textual data
is heterogeneous.

OIE techniques, on the other hand, extract all possible relationship types from a given collections of documents.
OIE can be divided into two main categories, data- and rule-based.

Rule-based OIE relies on hand-crafted patterns from PoS-tagged text or rules operating
on dependency parse trees. Data-based OIE generates patterns based on training data
represented by means of dependency tree or PoS-tagged text.

The figure below shows a taxonomy of different methods to perform relationship extraction.
If you are interested you can also check [Chapter 2 of my PhD thesis](http://davidsbatista.net/assets/documents/publications/dsbatista-phd-thesis-2016.pdf)
for a review of work in relationship extraction.

<figure>
  <img class="fullw" src="/assets/images/2017-05-08-Taxonomy-RE.png">
</figure>


---

<br>

### ReVerb: Identifying Relations for Open Information Extraction

ReVerb ([Fader et al., 2011](https://homes.cs.washington.edu/~soderlan/Fader-emnlp11.pdf))
extracts relationships based on a simple constraint, every relational phrase, i.e. the sequence of words
 connecting two entities, must be either:

- __a verb__ (e.g., _invented_),
- __a verb followed immediately by a preposition__ (e.g., _located in_),
- __a verb followed by nouns, adjectives, or adverbs ending in a preposition__ (e.g., _has atomic weight of_)

This corresponds to the PoS-tags pattern shown in the figure below

<figure>
  <img style="width: 50%;" src="/assets/images/2017-05-08-ReVerb.png">
</figure>


If there are multiple possible matches for a single verb, the longest possible match is chosen. If the pattern matches multiple adjacent sequences, ReVerb merges them into a single relation phrase.

During extraction, the system first looks for a matching relational phrase and then for the arguments (e1, e2) of the relationship, thus
avoiding confusing a noun in the relational phrase for an argument.

---

### Extracting semantic relationships from Portuguese

For English, there are several software packages ready to use out-of-the-box to perform
simple NLP tasks: such as part-of-speech tagging, dependency parsing, named-entity recognition, etc.

But for Portuguese, and many other languages, that's not the case, therefore I was curious whether
I could quickly and easily adapt ReVerb to Portuguese and and extract triples from a collection of documents.

I also did a small change from the original ReVerb algorithm, instead of looking for noun-phrases, I first tagged
all the named-entities (i.e., PER, LOC, ORG) in a document collection, and then tried to find relational phrases, according
to the pattern based on PoS, which connect the named-entities in a relationship.

I used three main resources for a running quick experiment:

__I)__
[Polyglot](http://polyglot.readthedocs.io/en/latest/), is a NLP library supporting several languages, include Portuguese, performing:

* sentence boundary detection

* part-of-speech tagging

* named-entity recognition (NER)

I had some troubles installing [PyICU](https://pypi.python.org/pypi/PyICU/)
which is needed for Polyglot, [this post on stackoverflow](http://stackoverflow.com/questions/40940188/error-installing-pip-pyicu) helped me.

Polyglot tries do automatically detect the language in which a text is written
and apply the correct model (i.e., for PoS-tagging, NER, etc.). But, due to
foreign names, sometimes it detects the language as being English or other
rather than Portuguese, but you can force the language of a text
and [override the language detection mechanism](https://github.com/aboSamoor/polyglot/issues/44)



<br>

__II)__ I used RegexpParser from [NLTK](http://www.nltk.org/) to encode ReVerb's regular expression adapted to Portuguese.
The [PoS-tags](http://polyglot.readthedocs.io/en/latest/POS.html) given by Polyglot
follow the [Universal Part of Speech tags set](http://www.dipanjandas.com/files/lrec.pdf), 17 unique tags.

    verb = "<ADV>*<AUX>*<VERB><PART>*<ADV>*"
    word = "<NOUN|ADJ|ADV|DET|ADP>"
    preposition = "<ADP|ADJ>"

    rel_pattern = "( %s (%s* (%s)+ )? )+ " % (verb, word, preposition)
    grammar_long = '''REL_PHRASE: {\\%s}''' % rel_pattern



<br>

__III)__ [CHAVE](http://www.linguateca.pt/chave/chave_ing.html), is a collection of
portuguese news articles, available free of charge for research proposes,
distributed by [Linguateca](http://www.linguateca.pt/).

You just need to give an email address to receive the credentials allowing to
download the collection. It contains all the complete published editions
for the years of 1994 and 1995 for two popular newspapers,
[PUBLICO](http://www.publico.pt) from Portugal and
[Folha de São Paulo](http://www.folha.uol.com.br/) from Brazil.
The figure below is a statistical description of the dataset.

<figure>
  <img style="width: 65%;" src="/assets/images/2017-05-08-CHAVE.png">
</figure>

---

I used Polyglot to identify named-entities and then I looked for ReVerb
patterns between every pair of named-entities which was no more than 8
tokens apart. This was applied to PUBLICO news articles from the following
 categories:

              ['Nacional', 'Mundo', 'Economia', 'Sociedade', 'Cultura']

This took around 2 hours to run on a Mac Book Pro, and extracted around
70 000 unique relational triples. I then started to explore the extracted
 triples by simply using _grep_, to find triples refering specific entities.

There are interesting facts in the semantics triples, mostly, of course,
related to events in 1994 and 1995, for instance:


When [Madredeus](https://www.wikiwand.com/en/Madredeus) start to gain
international fame and tour outside of Portugal:

    Teresa Salgueiro	cantar composições do	        Pedro Ayres Magalhães
    Madredeus	        esgota salas em	                Gent
    Madredeus	        vendem tanto como	        Paul McCartney
    Madredeus	        gravar em	                Inglaterra
    Madredeus	        recusam convite do	        PSD
    Teresa Salgueiro        frequentou aulas de canto com	Cortês Medina

When the East-Timor conflict gained larger and political proportions:

    Bill Clinton	  falou no problema dos direitos humanos em	Timor-Leste
    Bill Clinton      levante a questão de                          Timor-Leste
    Bill Clinton      também não deixará de mencionar a questão de  Timor
    Indonésia	  acusa                                         Portugal
    Governo da Indonésia	não poupa ataques	Portugal

    Clinton I-PER   deverá defender a retirada das tropas indonésias de     Timor - Leste
    Coliseu do Porto        I-LOC   haverá um espectáculo de solidariedade com      Timor - Leste   I-LOC
    Danielle Mitterrand     I-PER   participar numa conferência sobre       Timor - Leste   I-LOC
    Durão Barroso   I-PER   lança apelo por Timor   I-LOC
    Frelimo I-ORG   reconhecer a    República Democrática de Timor - Leste  I-LOC
    Fundação Gulbenkian     I-ORG   mostrara disponível para apoiar iniciativas concretas em        Timor   I-LOC
    Galvão de Melo  I-PER   não poupou elogios à presença indonésia em      Timor   I-LOC
    Governo russo   I-LOC   reconheceu      Timor - Leste   I-LOC
    Indonésia       I-LOC   explora petróleo do     Timor   I-LOC
    Indonésia       I-LOC   ocupou o território de  Timor   I-LOC

    António Guterres    vai estar num comício em	Coimbra
    Guterres	    impõe silêncio ao	        PS

    Carlsberg	entrou no capital da	Unicer


But among all the extracted triples there is also uninformative extractions,
which occurr mainly due to two problems:

- NER component of Polyglot
- ReVerb limitations - which are also pointed out in the original paper

<!--

One of the problems with the extraction has to due with the Polyglot failig
to correctly identify the named-entities.

Uplodar codigo e extraccoes feitas

# http://www.producao.usp.br/handle/BDPI/50949
# http://www.producao.usp.br/bitstream/handle/BDPI/50949/2678220.pdf?sequence=1&isAllowed=y

-->

You can find the code and the extracted triples here [github](github)